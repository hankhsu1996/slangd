"""
Build file for slangd tests.
"""

filegroup(
    name = "fixtures",
    srcs = glob(["fixtures/**"]),
)

cc_test(
    name = "project_layout_service_test",
    timeout = "short",
    srcs = [
        "core/project_layout_service_test.cpp",
    ],
    deps = [
        "//:slangd_core",
        "@catch2",
        "@slang",
    ],
)

cc_test(
    name = "definition_index_test",
    timeout = "short",
    srcs = [
        "semantic/definition_index_test.cpp",
    ],
    deps = [
        "//:slangd_core",
        "@catch2",
        "@slang",
    ],
)

cc_test(
    name = "overlay_session_test",
    timeout = "short",
    srcs = [
        "services/overlay_session_test.cpp",
    ],
    deps = [
        "//:slangd_core",
        "@catch2",
        "@slang",
    ],
)

cc_test(
    name = "global_catalog_test",
    timeout = "short",
    srcs = [
        "services/global_catalog_test.cpp",
    ],
    deps = [
        "//:slangd_core",
        "@catch2",
        "@slang",
    ],
)

cc_test(
    name = "symbol_index_test",
    timeout = "short",
    srcs = [
        "semantic/symbol_index_test.cpp",
    ],
    deps = [
        "//:slangd_core",
        "@catch2",
        "@slang",
    ],
)

cc_test(
    name = "definition_multifile_test",
    timeout = "short",
    srcs = [
        "semantic/definition_multifile_test.cpp",
    ],
    deps = [
        "//:slangd_core",
        "@catch2",
        "@slang",
    ],
)

cc_test(
    name = "semantic_index_basic_test",
    timeout = "short",
    srcs = [
        "semantic/semantic_index_basic_test.cpp",
        "semantic/test_fixtures.hpp",
    ],
    deps = [
        "//:slangd_core",
        "@catch2",
        "@fmt",
        "@slang",
    ],
)

cc_test(
    name = "semantic_index_patterns_test",
    timeout = "short",
    srcs = [
        "semantic/semantic_index_patterns_test.cpp",
        "semantic/test_fixtures.hpp",
    ],
    deps = [
        "//:slangd_core",
        "@catch2",
        "@fmt",
        "@slang",
    ],
)
